var v=Object.defineProperty;var g=(t,e,r)=>e in t?v(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var f=(t,e,r)=>(g(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const p="fca_live_PiZglIifvZRSNblRMLuFHY5VTix4uQstfvm2STlU";class L{constructor(e=p){f(this,"baseUrl","https://api.freecurrencyapi.com/v1/");this.headers={apiKey:e}}call(e,r={}){const o=new URLSearchParams({...r}).toString();return fetch(`${this.baseUrl}${e}?${o}`,{headers:this.headers}).then(s=>s.json()).then(s=>s)}status(){return this.call("status")}currencies(e){return this.call("currencies",e)}latest(e){return this.call("latest",e)}historical(e){return this.call("historical",e)}}function S(t,e){e.validity.patternMismatch?(e.setCustomValidity("Разрешён ввод только цифр"),h(t,e)):(e.setCustomValidity(""),y(t,e)),e.validity.valid?y(t,e):h(t,e)}function h(t,e){t.querySelector(`.${e.id}-error`).classList.add("error_active")}function y(t,e){t.querySelector(`.${e.id}-error`).classList.remove("error_active")}function C(t){Array.from(t.querySelectorAll(".numbers")).forEach(r=>{r.addEventListener("input",()=>{S(t,r)})})}const b=document.querySelector(".form");C(b);const u=new L;document.querySelector(".exchange");document.querySelector(".result");document.querySelector(".get__values");const l=document.getElementById("first"),d=document.getElementById("second");function m(t,e,r){const o=document.createElement("option");o.classList.add("value"),o.value=t,o.textContent=e,(t==="RUB"&&r.id==="second"||t==="USD"&&r.id==="first")&&(o.selected=!0),r.add(o)}function E(){return new Promise((t,e)=>{u.currencies().then(r=>{Object.keys(r.data).sort().forEach(c=>{const n=r.data[c].name;m(c,n,l),m(c,n,d)}),t()}).catch(r=>{console.log("Error: ",r),e(r)})})}window.addEventListener("DOMContentLoaded",()=>{E().then(()=>{console.log("Currencies loaded successfully.")}).catch(t=>{console.log("Error loading currencies: ",t)})});const a=document.getElementById("first-value"),i=document.getElementById("second-value");a.addEventListener("input",()=>{const t=l.value,e=d.value,r=parseFloat(a.value);u.latest({base_currency:t,currencies:e}).then(o=>{const s=o.data[e],c=r*s;i.value=c.toFixed(2)}).catch(o=>{console.log("Error while latest",o)})});i.addEventListener("input",()=>{const t=d.value,e=l.value,r=parseFloat(i.value);u.latest({base_currency:t,currencies:e}).then(o=>{const s=o.data[e],c=r*s;a.value=c.toFixed(2)}).catch(o=>{console.log("Error while latest",o)})});
